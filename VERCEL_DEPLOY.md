# Инструкция по деплою EcoMap KZ на Vercel

## Предварительные требования

1. Аккаунт на [Vercel](https://vercel.com)
2. Установленный [Vercel CLI](https://vercel.com/cli)
3. Git (установлен и настроен)

## Шаги по деплою

### 1. Инициализация Git репозитория

Если проект еще не в Git репозитории:

```bash
git init
git add .
git commit -m "Initial commit"
```

### 2. Настройка Vercel

#### Установка Vercel CLI (если еще не установлен)

```bash
npm install -g vercel
```

#### Вход в Vercel

```bash
vercel login
```

### 3. Деплой проекта

В корневой директории проекта выполните:

```bash
vercel
```

Следуйте инструкциям в командной строке:
- Подтвердите, что это новый проект
- Подтвердите директорию
- Настройте параметры проекта
- Настройте переменные окружения (важно добавить TELEGRAM_TOKEN)

### 4. Настройка вебхука Telegram

После успешного деплоя, вам нужно настроить вебхук для вашего бота. 
Получите URL вашего проекта на Vercel (например, `https://your-app-name.vercel.app`) и настройте вебхук через API Telegram:

```
https://api.telegram.org/bot{YOUR_BOT_TOKEN}/setWebhook?url=https://your-app-name.vercel.app/api
```

Замените `{YOUR_BOT_TOKEN}` на ваш токен бота и `your-app-name.vercel.app` на реальный домен вашего проекта на Vercel.

### 5. Проверка статуса вебхука

Вы можете проверить статус вебхука, используя:

```
https://api.telegram.org/bot{YOUR_BOT_TOKEN}/getWebhookInfo
```

### 6. Переменные окружения

Для работы бота необходимо настроить следующие переменные окружения в консоли Vercel:

- `TELEGRAM_TOKEN`: ваш токен Telegram бота
- `OPENWEATHER_API_KEY`: ваш ключ API OpenWeather (если используется)

## Важные примечания

1. **База данных**: Vercel не поддерживает постоянную файловую систему. Для хранения данных рекомендуется использовать внешние сервисы, такие как MongoDB, Firebase или другие облачные базы данных.

2. **Статические файлы**: Все статические файлы (например, изображения) должны быть размещены в директории `/public`.

3. **Функциональные ограничения**: Serverless-функции на Vercel имеют ограничения по времени выполнения (максимум 10 секунд для бесплатного плана). Убедитесь, что ваш код оптимизирован для быстрого выполнения.

4. **Cold Start**: Будьте готовы к тому, что функции могут иметь задержку при первом запуске после бездействия (cold start).

## Полезные ссылки

- [Документация Vercel](https://vercel.com/docs)
- [Python на Vercel](https://vercel.com/docs/functions/serverless-functions/runtimes/python)
- [Документация Telegram Bot API](https://core.telegram.org/bots/api) 